â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                    â•‘
â•‘          miniZ MCP Professional v4.3.7 - RELEASE NOTES             â•‘
â•‘                                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Release Date: December 11, 2025
Build Type: CRITICAL BUG FIX
Priority: HIGH - IMMEDIATE UPDATE RECOMMENDED

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› BUG FIXES (CRITICAL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… FIXED: API Keys & Endpoints NOT SAVED After Restart
   
   âŒ BEFORE (v4.3.6 and earlier):
   - User nháº­p Gemini API key â†’ LÆ°u â†’ KHá»I Äá»˜NG Láº I â†’ Máº¤T!
   - User nháº­p OpenAI API key â†’ LÆ°u â†’ KHá»I Äá»˜NG Láº I â†’ Máº¤T!
   - User nháº­p Serper API key â†’ LÆ°u â†’ KHá»I Äá»˜NG Láº I â†’ Máº¤T!
   - User cáº­p nháº­t endpoint token â†’ LÆ°u â†’ KHá»I Äá»˜NG Láº I â†’ Máº¤T!
   
   ROOT CAUSE #1 - Backend Save Logic:
   - HÃ m save_endpoints_to_file() chá»‰ so sÃ¡nh endpoints vÃ  active_index
   - KHÃ”NG so sÃ¡nh API keys (gemini_api_key, openai_api_key, serper_api_key)
   - Khi chá»‰ thay Ä‘á»•i API key â†’ hÃ m return True sá»›m (line 613) â†’ KHÃ”NG GHI FILE
   
   ROOT CAUSE #2 - Frontend Auto-Load:
   - JavaScript function loadCurrentEndpoint() chá»‰ gá»i khi user CLICK Settings
   - KHÃ”NG tá»± Ä‘á»™ng gá»i khi page load láº§n Ä‘áº§u
   - Backend ÄÃƒ load keys thÃ nh cÃ´ng nhÆ°ng Web UI khÃ´ng hiá»ƒn thá»‹
   
   CODE LOCATION (Backend - xiaozhi_final.py, Line 590-625):
   ```python
   # BUG: Chá»‰ so sÃ¡nh endpoints vÃ  active_index
   if (old_data.get('endpoints') == endpoints and 
       old_data.get('active_index') == active_index):
       return True  # âŒ SKIP SAVE - API keys bá»‹ bá» qua!
   ```
   
   CODE LOCATION (Frontend - xiaozhi_final.py, Line 11540):
   ```javascript
   function openSettingsModal() {
       loadCurrentEndpoint();  // âŒ CHá»ˆ gá»i khi user click Settings
   }
   // âŒ THIáº¾U: KhÃ´ng gá»i khi page load
   ```
   
   âœ… FIXED IN v4.3.7:
   
   **Backend Fix:**
   ```python
   # SO SÃNH Äáº¦Y Äá»¦ Táº¤T Cáº¢ FIELDS
   if (old_data.get('endpoints') == endpoints and 
       old_data.get('active_index') == active_index and
       old_data.get('gemini_api_key') == GEMINI_API_KEY and
       old_data.get('openai_api_key') == OPENAI_API_KEY and
       old_data.get('serper_api_key') == SERPER_API_KEY):
       return True  # âœ… CHá»ˆ SKIP KHI KHÃ”NG CÃ“ THAY Äá»”I GÃŒ Cáº¢
   ```
   
   **Frontend Fix:**
   ```javascript
   // ğŸ”¥ AUTO-LOAD API KEYS when page loads
   document.addEventListener('DOMContentLoaded', () => {
       loadMusicFolderSettings();
       loadCurrentEndpoint();  // âœ… Auto-load API keys
   });
   ```
   
   ğŸ“Š IMPACT:
   - Affects: ALL v4.3.0 - v4.3.6 users
   - Symptom: API keys lost after every restart
   - Data Loss: YES - requires re-entering keys
   - Security Risk: LOW (keys still encrypted in config file)
   - User Experience: ğŸ”´ CRITICAL - Must re-enter keys every time
   
   ğŸ”§ HOW TO VERIFY FIX:
   1. CÃ i v4.3.7
   2. Nháº­p Gemini API key â†’ LÆ°u
   3. Khá»Ÿi Ä‘á»™ng láº¡i á»©ng dá»¥ng
   4. Má»Ÿ Settings â†’ API key Tá»° Äá»˜NG HIá»‚N thá»‹ âœ…
   5. Kiá»ƒm tra: API key váº«n cÃ²n? â†’ YES âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”’ SECURITY ENHANCEMENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… CONFIRMED: xiaozhi_endpoints.json NOT BUNDLED IN EXE
   
   - ÄÃ£ kiá»ƒm tra miniZ_MCP_Professional.spec
   - KHÃ”NG cÃ³ xiaozhi_endpoints.json trong datas list
   - CHá»ˆ cÃ³ template: xiaozhi_endpoints_template.json
   - API keys cá»§a developer KHÃ”NG bá»‹ lá»™ trong EXE
   
   FILE CHECK:
   ```python
   # miniZ_MCP_Professional.spec, Line 7
   datas=[
       ('LICENSE_KEYS.json', '.'), 
       ('LICENSE_ACTIVATION_GUIDE.md', '.'), 
       ('xiaozhi_endpoints_template.json', '.'),  # âœ… CHá»ˆ TEMPLATE
       # xiaozhi_endpoints.json - âŒ KHÃ”NG CÃ“
   ]
   ```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ BUILD INFORMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXE Build:
- Tool: PyInstaller 6.17.0
- Python: 3.13.9
- Build Time: 114.2 seconds
- Output: dist/miniZ_MCP_Professional.exe
- Size: ~149.4 MB
- Warnings: 2 (non-critical: urllib3, comtypes)

Installer Build:
- Tool: Inno Setup 6.5.4
- Build Time: 36.3 seconds
- Output: miniZ_MCP_Professional_Setup_v4.3.7.exe
- Compression: LZMA2/Ultra64
- Warnings: 3 (expected: architecture, version check, privileges)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ UPGRADE PATH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FROM v4.3.6 â†’ v4.3.7:
1. Táº£i installer má»›i: miniZ_MCP_Professional_Setup_v4.3.7.exe
2. Cháº¡y installer (sáº½ ghi Ä‘Ã¨ v4.3.6)
3. API keys cÅ© VáºªN CÃ’N trong xiaozhi_endpoints.json
4. Khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng â†’ Keys Ä‘Æ°á»£c load tá»± Ä‘á»™ng âœ…

FROM v4.3.0 - v4.3.5 â†’ v4.3.7:
1. Sao lÆ°u xiaozhi_endpoints.json (náº¿u cÃ³)
2. Cháº¡y installer v4.3.7
3. Copy láº¡i file backup (náº¿u cáº§n)
4. Nháº­p láº¡i API keys trong Web UI

CLEAN INSTALL (khÃ¡ch hÃ ng má»›i):
1. Cháº¡y installer
2. Nháº­p license key (náº¿u cÃ³)
3. Cáº¥u hÃ¬nh API keys trong Web UI
4. API keys sáº½ Tá»° Äá»˜NG LÆ¯U vÃ  Báº¢O Tá»’N sau restart âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING PERFORMED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Test 1: API Key Persistence
âœ… Nháº­p Gemini API key â†’ LÆ°u â†’ Restart â†’ Key váº«n cÃ²n
âœ… Nháº­p OpenAI API key â†’ LÆ°u â†’ Restart â†’ Key váº«n cÃ²n
âœ… Nháº­p Serper API key â†’ LÆ°u â†’ Restart â†’ Key váº«n cÃ²n

Test 2: Endpoint Configuration
âœ… Thay Ä‘á»•i endpoint token â†’ LÆ°u â†’ Restart â†’ Token váº«n cÃ²n
âœ… Switch device â†’ Restart â†’ Active device Ä‘Ãºng
âœ… Add new device â†’ Restart â†’ Device list Ä‘áº§y Ä‘á»§

Test 3: Security
âœ… Kiá»ƒm tra EXE vá»›i 7-Zip â†’ KHÃ”NG cÃ³ xiaozhi_endpoints.json
âœ… Kiá»ƒm tra EXE strings â†’ KHÃ”NG cÃ³ API keys tháº­t
âœ… Fresh install â†’ Template trá»‘ng (no keys)

Test 4: Backward Compatibility
âœ… Upgrade tá»« v4.3.6 â†’ v4.3.7 â†’ KhÃ´ng máº¥t data
âœ… xiaozhi_endpoints.json format unchanged
âœ… Old API keys tá»± Ä‘á»™ng migrate

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ CHANGELOG SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

v4.3.7 (2025-12-11) - CRITICAL FIX
+ Fixed: API keys not saved after restart
+ Fixed: Endpoints not persisted correctly
+ Enhanced: Full field comparison in save_endpoints_to_file()
+ Security: Confirmed no API keys in EXE bundle

v4.3.6 (2025-12-10)
+ Added: VLC MCP Server (JSON-RPC 2.0)
+ Added: 15 VLC tools with JSON Schema
+ Enhanced: Hybrid REST + MCP architecture
+ Fixed: License persistence (3-location backup)

v4.3.5 (2025-12-09)
+ Added: Knowledge Base auto-search
+ Enhanced: Gemini AI integration

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ KNOWN ISSUES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

None in v4.3.7

Resolved Issues from v4.3.6:
âœ… API keys lost after restart (FIXED)
âœ… Endpoints not saved (FIXED)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ RECOMMENDATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. **IMMEDIATE UPDATE**: All v4.3.0-v4.3.6 users should update NOW
   - Critical bug affects core functionality
   - No downside to upgrading
   - Backward compatible

2. **BACKUP**: TrÆ°á»›c khi update, backup xiaozhi_endpoints.json
   - Location: C:\Program Files\miniZ MCP\xiaozhi_endpoints.json
   - Hoáº·c: CÃ¹ng thÆ° má»¥c vá»›i EXE

3. **VERIFY**: Sau khi update, test API key persistence:
   - Nháº­p key â†’ LÆ°u â†’ Restart â†’ Check key váº«n cÃ²n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ SUPPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Issues vá»›i v4.3.7?
1. Kiá»ƒm tra xiaozhi_endpoints.json cÃ³ tá»“n táº¡i khÃ´ng
2. Kiá»ƒm tra quyá»n ghi file (Run as Administrator?)
3. Xem log trong terminal khi khá»Ÿi Ä‘á»™ng

Contact:
- GitHub Issues: [Your Repo URL]
- Email: support@minizmcp.com
- Discord: [Your Discord]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… FILES DELIVERED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ installer_output/
â”œâ”€â”€ miniZ_MCP_Professional_Setup_v4.3.7.exe  (149.4 MB)
â””â”€â”€ RELEASE_NOTES_v4.3.7.txt                 (This file)

ğŸ“‚ dist/
â””â”€â”€ miniZ_MCP_Professional.exe               (Standalone EXE)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Â© 2025 miniZ MCP Team. All Rights Reserved.
Built with â¤ï¸ for the community.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
